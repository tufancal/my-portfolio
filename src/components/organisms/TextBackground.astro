---
import {
  storyblokEditable,
  renderRichText,
  type StoryblokRichTextNode,
  type SbBlokData,
} from "@storyblok/astro";
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";
import type { TextBackground } from "@/.storyblok/types/285719928053161/storyblok-components";

interface Props {
  blok: TextBackground;
}

const { blok } = Astro.props;

// Render rich text content
const content = renderRichText(blok.copy as StoryblokRichTextNode<string>);

// Determine text styling based on isTitle flag
const textClasses = blok.isTitle
  ? "text-3xl md:text-4xl lg:text-5xl font-bold"
  : "text-xl md:text-2xl lg:text-3xl font-semibold";
---

<section
  {...storyblokEditable(blok as SbBlokData)}
  class="container mx-auto mb-12 max-w-5xl px-4"
>
  <!-- Hero section with background -->
  <div class="hero min-h-[250px] md:min-h-[300px] bg-base-200 rounded-box mb-8">
    <div class="hero-content text-center py-12">
      <div class={`max-w-3xl text-base-content ${textClasses}`}>
        <Fragment set:html={content} />
      </div>
    </div>
  </div>

  <!-- Action blocks grid -->
  {
    blok.blocks && blok.blocks.length > 0 && (
      <div class="flex flex-wrap gap-4 justify-center">
        {blok.blocks?.map((block) => (
          <div class="flex-shrink-0">
            <StoryblokComponent blok={block as SbBlokData} />
          </div>
        ))}
      </div>
    )
  }
</section>
